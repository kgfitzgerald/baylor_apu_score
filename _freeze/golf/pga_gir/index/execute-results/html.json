{
  "hash": "921c631564a880407e8b8e960f60faf3",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"PGA - Scheffler Greens in Regulation\"\nauthor:\n  - name: Jonathan Lieb\n    email: jonathan_lieb1@baylor.edu\n    affiliation:\n      - id: bay\n        name: Baylor University\ndate: July 18, 2024\nformat:\n  html:\n    grid:\n      margin-width: 350px\ntoc: true\ntoc-location: left\ndescription: Exploring Probability Confidence Intervals with Golf Data\ncategories:\n  - Confidence Intervals\n  - Binomial Tests\n  - Comparing Two Proportions\neditor_options:\n  chunk_output_type: console\ncallout-icon: false\n# embed-resources: true\n---\n\n\n::: {.callout-note collapse=\"true\" title=\"Facilitation notes\" appearance=\"minimal\"}\n+ This module would be suitable for an in-class lab or take-home assignment in an introductory statistics course. \n\n+ It assumes a basic familiarity with the RStudio Environment has already been covered, but no prior programming experiences is expected.\n\n+ Students should be provided with the following data file (.csv) and Quarto document (.qmd) to produce visualizations and write up their answers to each exercise. Their final deliverable is to turn in an .html document produced by \"Rendering\" the .qmd. \n  \n  + [data](scheffler_2023.csv)\n  + [Student Quarto template](student_template.qmd)\n\n+ [Posit Cloud](https://posit.cloud/) (via an Instructor account) or [Github classroom](https://classroom.github.com) are good options for disseminating files to students, but simply uploading files to your university's course management system works, too.\n:::\n\n# Welcome video\n\n<iframe width=\"560\" height=\"315\" src title=\"placeholder\">\n\n</iframe>\n\n# Introduction\n\nIn this module, you will be exploring the concept of confidence intervals for proportions through the lens of golf. Specifically, you will be analyzing the 2023 greens in regulation data for Scottie Scheffler. Scottie Scheffler was the number 1 ranked golfer in the world and the PGA Tour Player of the Year in 2023.\n\n::: column-margin\n\n![Scottie Scheffler](https://upload.wikimedia.org/wikipedia/commons/8/8a/Scottie_Scheffler_2023_02.png)\n\nImage Source: <a href=\"https://commons.wikimedia.org/wiki/File:Scottie_Scheffler_2023_02.png\">Titleist</a>, <a href=\"https://creativecommons.org/licenses/by/3.0\">CC BY 3.0</a>, via Wikimedia Commons\n\n:::\n\n::: {.callout-note title=\"Learning Objectives\" appearance=\"minimal\"}\nBy the end of this module, you will be able to:\n\n-   Read (import) a dataset into your RStudio Environment\n\n-   Mutate and arrange data in R\n\n-   Use R to make confidence intervals for a proportion\n\n-   Perform a hypothesis test to compare proportions\n:::\n\n::: column-margin\n\\\n\\\n\\\n\\\n\n**NOTE**: **R** is the name of the programming language itself and **RStudio** is a convenient interface. To throw even more lingo in, you may be accessing RStudio through a web-based version called **Posit Cloud**. But R is the programming language you are learning\n:::\n\n::: {.callout-caution collapse=\"true\" title=\"Research Questions\"}\n\nDuring this lab, you'll investigate the following research questions:\n\n+ What is the sample probability that Scottie Scheffler hits the green in regulation from different lies?\n+ What is the confidence interval for the true probability that Scottie Scheffler hits the green in regulation from different lies?\n+ Is there a significant difference in the probability that Scottie Scheffler hits the green in regulation in 2023 from different lies?\n\n:::\n\n# Getting started: Scottie Scheffler Greens data\n\nThe first step to any analysis in R is to **load necessary packages and data**. \n\n::: column-margin\n**TIP**: **Packages** are collections of functions that extend the capabilities of R. You can think of them as free apps you can download to your phone.\n:::\n\nRunning the following code will load the `tidyverse` and  packages and the `scheffler_2023` data we will be using in this lab.\n\n\n\n::: column-margin\n**TIP**: As you follow along in the lab, you should run each corresponding code chunk in your .qmd document. To \"Run\" a code chunk, you can press the green \"Play\" button in the top right corner of the code chunk in your .qmd. You can also place your cursor anywhere in the lines of code you want to run and press \"command + return\" (Mac) or \"Ctrl + Enter\" (Windows).\n:::\n\n::: column-margin\n**TIP**: Hashtags in R allows you to add comments to your code.\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) #loads package\n\nscheffler_2023 <- read_csv(\"scheffler_2023.csv\") #loads data\n```\n:::\n\n\n::: column-margin\nAll data for the lab is from the [PGA TOUR's Website](https://www.pgatour.com/stats.html)\n:::\n\n## Terms to know\n\nBefore proceeding with the analysis, let's make sure we know some golf terminology that will help us putt-putt our way through this lab.\n\n::: column-margin\nAre Greens in Regulation important to scoring? Check out the table below to see how greens in regulation and lower handicaps go hand and hand.\n\n|Handicap | GIR %|\n|--- | ---|\n|0| 64%| \n|0-5| 47%|\n|5-10| 36%|\n|10-15| 27%|\n|15-20| 20%|\n|20-25| 12%|\n|25-30| 10%|\n|30+| 6%|\n\nData Source: [The Range by The Grint](https://thegrint.com/range/2013/03/golf-tips-gir/)\n:::\n\n::: column-margin\nA Par 3 hole should take 1 shot to reach the green in regulation\n![](tanglewood_hole5.jpg)\n\nA Par 4 hole should take 2 shots to reach the green in regulation\n![](tanglewood_hole1.jpg)\n\nA Par 5 hole should take 3 shots to reach the green in regulation\n![](tanglewood_hole2.jpg)\nImages source: [Tanglewood Golf Course](https://www.tanglewoodfulton.com/golf-course/hole-by-hole-layout), Public Domain\n\n:::\n\n#### Lie Terminology\n-   The **fairway** is the short grass between the tee box and the green, where the ball is supposed to be hit on a par 4 or par 5 hole\n-   A **bunker** is a hazard filled with sand\n    -   A **fairway bunker** is a bunker located in or next to the fairway\n\n::: {.callout-important}\n\n#### Pars and Greens in Regulation\n-   A **par** in golf is the number of strokes a good golfer is expected to take on a hole or course\n-   A **green in regulation** (GIR) is when a golfer reaches the green in the expected number of strokes (or fewer) on a par 3, 4, or 5 hole\n\n     -  For example, on a **par 4** hole, a golfer would be expected to reach the green in 2 strokes (a drive and an approach shot) and then putt out in 2 more strokes for a total of 4 strokes. If a golfer reaches the green in 2 strokes, they have hit the green in regulation.\n     - On a **par 3** hole, a golfer would be expected to reach the green in 1 stroke\n     - On a **par 5** hole, a golfer would be expected to reach the green in 3 strokes.\n\n\n:::\n\n## Variable descriptions\n\nThe `scheffler_2023` data you'll be analyzing in this lab provides approach data for Scottie Scheffler in 2023. The data includes the number of greens in regulation (GIR) hit by Scottie Scheffler, the number of holes he played, and the cut he hit from.\n\n<details>\n<summary><b>Variable Descriptions</b></summary>\n\n| Variable | Description |\n|----|----------------------------|\n| `player` | PGA Tour player |\n| `year` | PGA Tour Season |\n| `greens` | Greens in Regulation Hit |\n| `holes` | Number of Holes |\n| `cut` | The type of ground that the approach shot to the green was hit from |\n\n\n## Viewing the data\n\nWe can use the `glimpse()` function to get a quick look at our `scheffler_2023` data. The `glimpse` code provides the number of observations (Rows) and the number of variables (Columns) in the dataset. The “Rows” and “Columns” are referred to as the **dimensions** of the dataset. It also shows us the names of the variables (`player`, `greens`, `holes` ..., `cut`) and the first few observations for each variable.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nglimpse(scheffler_2023)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\nRows: 3\nColumns: 5\n$ player <chr> \"Scottie Scheffler\", \"Scottie Scheffler\", \"Scottie Scheffler\"\n$ year   <dbl> 2023, 2023, 2023\n$ greens <dbl> 247, 657, 28\n$ holes  <dbl> 416, 760, 48\n$ cut    <chr> \"Other\", \"Fairway\", \"Bunker\"\n```\n\n\n:::\n:::\n\n\nAnother useful function to get a quick look at the data is the `head()` function. This function shows the first few rows of the dataset. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nhead(scheffler_2023)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 3 × 5\n  player             year greens holes cut    \n  <chr>             <dbl>  <dbl> <dbl> <chr>  \n1 Scottie Scheffler  2023    247   416 Other  \n2 Scottie Scheffler  2023    657   760 Fairway\n3 Scottie Scheffler  2023     28    48 Bunker \n```\n\n\n:::\n:::\n\n\n\n::: {.callout-note  title=\"Exercise 1: Data Structure\"}\n\na. What are the **dimensions** of this dataset?\n\nb. Are there any **variables** not useful for our analysis? If so, list the names of these variables.\n\nc. What **type of variable** (ex: continuous numeric, catergorical, binary, ordinal...) is the `cut` **variable**?\n\nd. Which two **variables** can be used to calculate the proportion of greens hit in regulation?\n\n:::\n\n::: column-margin\n\\\n**TIP:** Type your answers to each exercise in the .qmd document. \n\\\n:::\n\n## Mutating Data\n\n1. Mutating data in R is the process of creating new variables based on existing variables in a dataset. This can be done using the `mutate()` function in the `dplyr` package.\n2. The mutate function takes a data frame as its first argument and then a series of new variable assignments.\n(Eg: `mutate(data, new_var1 = old_var * 2, new_var = old_var1 - old_var2)`)\n\n## Arranging Data\n\n1. The `arrange()` function in the `dplyr` package is used to sort the data frame by one or more variables.\n2. The `arrange()` function takes a data frame as its first argument and then a series of variables to sort by. (Eg: `arrange(data, variable1, variable2)`)\n3. By default, the `arrange()` function sorts in ascending order. To sort in descending order, you can use the `desc()` function inside the `arrange()` function. (Eg: `arrange(data, desc(variable1))`)\n\n::: {.callout-note  title=\"Exercise 2: Data Manipulation\"}\n\n::: column-margin\n\n**HINT**: Values can be assigned to variable names in *R* using the `<-` operator. For example, `x <- 2`, `y <- \"Hello\"`, or `z <- 2 * x`.\n\nUsing `=` also works in **R** for assigning values to variables, but it is common practice to use `<-` for this purpose.\n\n:::\n\nUse the `mutate()` function to create a new variable called `gir_rate` that represents the proportion of greens hit in regulation. Save this new dataset as `scheffler_2023_mutated`.\nThen arrange the `scheffler_2023_mutated` data by the `gir_rate` variable in descending order.\n\na. From what `cut` did Scottie Scheffler have the best Green in Regulation rate?\n\nb. From what `cut` did Scottie Scheffler have the worst Green in Regulation rate?\n\n:::\n\n\n# Confidence Intervals for Proportions\n\nA confidence interval for a proportion is a range of values that is likely to contain the true value of the population proportion with a certain level of confidence. Confidence intervals for proportions can be used for a variety of purposes, including:\n\n1. Quantifying the precision of our estimates. The wider the confidence interval, the less precise our estimate is, the narrower the confidence interval, the more precise our estimate is.\n\n2. Making inferences about the population proportion. For example, if a 90% confidence interval was used, it could be said that if the same population was sampled on numerous occasions and interval estimates were made on each occasion, approximately 90% of the intervals would contain the population parameter.\n\n3. Testing hypothesized values of the population proportion. If the hypothesized value is not within the confidence interval, then we have reason to believe that it is not the true population proportion.\n\n4. Comparing two proportions. If the confidence intervals for two sample proportions do not overlap, then we have reason to believe that the two true population proportions are different.\n\n## Making Confidence Intervals in R\n\nThe statistical notation for a confidence interval for a proportion is:\n\n$$\n\\hat{p} \\pm z \\times \\sqrt{\\frac{\\hat{p}(1-\\hat{p})}{n}}\n$$\n\nWhere: \n\n- $\\hat{p}$ is the sample proportion.\n- $z$ is the z-score that corresponds to the desired level of confidence\n- $n$ is the sample size\n\n::: column-margin\n**TIP**: The z-score for a 95% confidence interval is approximately 1.96. You can use this value to calculate the confidence interval for the proportion of greens hit in regulation by Scottie Scheffler from the fairway.\n:::\n\n::: column-margin\nSome common Confidence Intervals and their corresponding z-scores are:\n\n| Confidence Interval | Z-Score |\n|----|----------------------------|\n| 90 % | 1.65 |\n| 95 % | 1.96 |\n| 98 % | 2.33 |\n| 99 % | 2.58 |\n\n:::\n\nIn R you can perform basic math using the `*` operator for multiplication and the `\\` operator for division. \n\nFor a quick example if the proportion of success for a problem is .6, the sample size is 100, and the test is being performed at the 95% confidence level, then the confidence interval for the proportion of success can be calculated as follows:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlower_limit <- .6 - 1.96 * sqrt((.6 * (1-.6))/100)\nupper_limit <- .6 + 1.96 * sqrt((.6 * (1-.6))/100)\n```\n:::\n\n\nThis would give you the lower limit (0.50398) and the upper limit (0.69602) of the 95% confidence interval for the true proportion of success.\n\n\n::: {.callout-note title=\"Exercise 3: Manual Confidence Intervals\"}\n\nUse the numbers from the `scheffler_2023_mutated` data frame where **`cut` = \"Fairway\"** to calculate a **95% confidence interval** for the proportion of greens hit in regulation by Scottie Scheffler from the fairway. \n\na. What is value of $\\hat{p}$ for the fairway cut?\n\nb. What is the value of $n$ for the fairway cut?\n\nc. What is the estimated value of the **upper limit** of the confidence interval for the fairway cut?\n\nd. What is the estimated value of the **lower limit** of the confidence interval for the fairway cut?\n\n:::\n\n## Using `prop.test` to Calculate Confidence Intervals \n\nIn R the `prop.test()` function can be used to calculate confidence intervals for proportions. The `prop.test()` function takes the number of successes and the total number of trials as arguments and returns a confidence interval for the proportion.\n\n::: column-margin\n\n**TIP**: You can type `?prop.test` in the R console to get more information about the `prop.test()` function, including which arguments it takes and what it returns.\n\n**TIP**: Throughout this lesson, we will set the `correct` argument to `FALSE` in the `prop.test()` function. This is because the `correct` argument is used to apply a continuity correction to the confidence interval, which we will not be using in this lesson.\n\n:::\n\nBelow is an example of how to use the `prop.test()` function to calculate a 95% confidence interval for data where the number of successes is 60 and the total number of trials is 100. If `$conf.int` is added to the end of the `prop.test()` function, the function will return only the confidence interval and confidence level.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprop.test(60, 100, conf.level = .95, correct = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\t1-sample proportions test without continuity correction\n\ndata:  60 out of 100, null probability 0.5\nX-squared = 4, df = 1, p-value = 0.0455\nalternative hypothesis: true p is not equal to 0.5\n95 percent confidence interval:\n 0.5020026 0.6905987\nsample estimates:\n  p \n0.6 \n```\n\n\n:::\n\n```{.r .cell-code}\nprop.test(60, 100, conf.level = .95, correct = FALSE)$conf.int\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 0.5020026 0.6905987\nattr(,\"conf.level\")\n[1] 0.95\n```\n\n\n:::\n:::\n\n\n::: column-margin\n\n**TIP**: The `$` operator is used to access a specific element of a list in R. In this case, the `conf.int` element of the list returned by the `prop.test()` function contains the confidence interval.\n\n:::\n\n::: {.callout-note title=\"Exercise 4: Using R Functions for Confidence Intervals\"}\n\nUse the `prop.test()` function to calculate a **95% confidence interval** for the proportion of greens hit in regulation by Scottie Scheffler from the **bunker**.\n\na. What is the value of the **lower limit** of the confidence interval for the bunker cut?\n\nb. What is the value of the **upper limit** of the confidence interval for the bunker cut?\n\nc. Is the range of the confidence interval for the **bunker** cut wider or narrower than the range of the confidence interval for the **fairway** cut?\n\n:::\n\n## Testing Hypothesized Proportions\n\n\n#### Setting Up Hypotheses\n\nIn hypothesis testing for proportions, a null hypothesis is set up to test a claim about a population proportion. The null hypothesis is that the population proportion is equal to a specific value. The alternative hypothesis can be that the population proportion is not equal to the specific value, greater than the specific value, or less than the specific value. \n\nThe options are shown below: \n\n::: column-margin\n\n**NOTE**: It is common practice to denote a null hypothesis with $H_0$ and an alternative hypothesis with $H_A$. Sometime the alternative hypothesis is denoted with $H_1$.\n\n:::\n\n$H_0: p = p_0$\n\nand \n\n$H_A: p \\neq p_0$ or  \n$H_A: p > p_0$ or  \n$H_A: p < p_0$ \n\nWhere $p_0$ is the hypothesized value of the population proportion and $p$ is the true population proportion.\n\n#### Significance Level\n\nFor hypothesis testing, a **significance level** is set to determine the probability of rejecting the null hypothesis when it is true. The significance level is denoted by $\\alpha$ and is often set to 0.05. This means that there is a 5% chance of rejecting the null hypothesis when it is actually true. Other common **significance levels** are 0.01 and 0.10.\n\n#### Calculating the Test Statistic\n\nA **test statistic** is a value calculated from the sample data that is used to determine whether the null hypothesis should be rejected or not.\n\nThe **test statistic** for hypothesis testing for proportions is:\n\n$$z = \\frac{\\hat{p} - p_0}{\\sqrt{\\frac{p_0(1 - p_0)}{n}}}$$\n\nWhere $\\hat{p}$ is the sample proportion, $p_0$ is the hypothesized value of the population proportion, and $n$ is the sample size. \n\n#### Determining the Significance of the Test\n\nThere are two common ways to determine the significance of the test:\n\n1. Compare the test statistic to the critical value\n\n2. Compare the p-value to the significance level\n\nThe first method compares the **test statistic** to the **critical value**. The critical value is the value that separates the rejection region from the non-rejection region. If the test statistic is in the rejection region, the null hypothesis is rejected. This also corresponds to the confidence intervals given for true probability of success. If the hypothesized value of the population proportion is within the confidence interval, the null hypothesis is not rejected. If it is outside the confidence interval, the null hypothesis is rejected.\n\n::: column-margin\n**TIP**: Critical values can be found very easily in **R** using the `qnorm()` function. For example, `qnorm(.975)` will return the critical value for a 95% confidence interval (two sided test).\n\nIf the test is right-tailed (greater than), the critical value is found using `qnorm(.95)` for a 95% confidence interval. If the test is left-tailed (less than), the critical value is found using `qnorm(.05)` for a 95% confidence interval.\n\n:::\n\n\nThe **p-value** is the most common way to determine the significance of the test. The **p-value** is the probability of observing a test statistic as extreme as the one calculated from the sample data, assuming the null hypothesis is true. If the **p-value** is less than the significance level, the null hypothesis is rejected. \n\n\n#### Hypothesis Testing in R\n\nHypothesis testing for proportions can also be done in **R** using the `prop.test()` function. Seen below is an example where it is being tested if the true proportion of successes is different than .7. The first test shows the results if the sample proportion had 60 out of 100 successes and the second test shows the results if the sample proportion had 70 out of 100 successes. Both tests are done using an $\\alpha$ level of 0.05.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprop.test(60, 100, p = .7, conf.level = .95, correct = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\t1-sample proportions test without continuity correction\n\ndata:  60 out of 100, null probability 0.7\nX-squared = 4.7619, df = 1, p-value = 0.0291\nalternative hypothesis: true p is not equal to 0.7\n95 percent confidence interval:\n 0.5020026 0.6905987\nsample estimates:\n  p \n0.6 \n```\n\n\n:::\n\n```{.r .cell-code}\nprop.test(70, 100, p = .7, conf.level = .95, correct = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\t1-sample proportions test without continuity correction\n\ndata:  70 out of 100, null probability 0.7\nX-squared = 4.2073e-31, df = 1, p-value = 1\nalternative hypothesis: true p is not equal to 0.7\n95 percent confidence interval:\n 0.6041515 0.7810511\nsample estimates:\n  p \n0.7 \n```\n\n\n:::\n:::\n\n\nThe test statistic is returned in the output of `prop.test()` as `X-squared`. This is the square of the z-value. For the first test the test statistic is 2.182, and for the second test the test statistic is 0. For a 95% confidence level for a two-sided test, the critical value is 1.96. If the test statistic is greater than 1.96 or less than -1.96, the null hypothesis is rejected. Since the test statistic for the first test is less than -1.96, the null hypothesis is rejected. Since the test statistic for the second test is between -1.96 and 1.96, the null hypothesis is not rejected.\n\nThe p-value of the test is returned in the output of the `prop.test()` function. For the first test, the p-value is 0.029 and for the second test, the p-value is 1. Since the p-value of the first test is less than the significance level of 0.05, the null hypothesis is rejected. Since the p-value for the second test is greater than the significance level of 0.05, we fail to reject the null hypothesis.\n\n#### Drawing Conclusions\n\nIf the null hypothesis is rejected we can conclude that the sample data provides enough evidence to support the alternative hypothesis. If the null hypothesis was that the population proportion is equal to .7 and the alternative hypothesis was that the population proportion is not equal to .7 and $\\alpha = 0.5$, then we might say, \n\n*\"There is significant evidence to suggest that the true population proportion is not equal to .7 at the 95% confidence level.\"*\n\nIf the null hypothesis is not rejected we do not automatically accept the null hypothesis. We simply do not have enough evidence to reject it. For example if the null hypothesis was that the population proportion is equal to .7 and the alternative hypothesis was that the population proportion is not equal to .7 and $\\alpha = .05$, then we might say,\n\n*There is not enough evidence to suggest that the true population proportion is different from .7 at the 95% confidence level.\"*\n\n#### Example\n\nSuppose you are watching a golf tournament on TV and Scottie Scheffler is about to hit an approach shot from the fairway. You hear the announcer say that Scottie Scheffler hits 3/4 of his greens in regulation from the fairway. You are skeptical of this claim and decide to test it against the data you have collected at the 95% confidence level.\n\nYou set up a hypothesis test with the following hypotheses:\n\n- **Null Hypothesis $H_0$**: The proportion of greens hit in regulation by Scottie Scheffler from the fairway is 0.75.\n\n- **Alternative Hypothesis $H_A$**: The proportion of greens hit in regulation by Scottie Scheffler from the fairway is not 0.75.\n\n\n::: {.callout-note title=\"Exercise 5: Confidence Intervals for Hypothesis Testing\"}\n\nUse the `prop.test()` function to test the hypothesis that the true proportion of greens hit in regulation by Scottie Scheffler from the fairway is not 0.75. $\\alpha = 0.05$. Set `correct = FALSE`.\n\na. What is the **p-value** of the test?\n\nb. Based on the **p-value**, do you reject or fail to reject the null hypothesis?\n\nc. What is your **conclusion**?\n\n:::\n\n# Comparing Two Proportions\n\nSometimes, comparing two sample proportions is necessary to determine if they are significantly different. This can be done with a two sample z-test for equality of proportions.\n\nThe null hypothesis for a two sample z-test for equality of proportions is that the two proportions are equal.\n\n$H_0: p_1 = p_2$\n\nThe alternative hypothesis can be that the two proportions are not equal.\n\n$H_A: p_1 \\neq p_2$\n\nThat the first proportion is greater than the second proportion.\n\n$H_A: p_1 > p_2$\n\nor that the first proportion is less than the second proportion.\n\n$H_A: p_1 < p_2$\n\nThe test-statistic for the two sample z-test for equality of proportions is calculated as:\n\n$$Z = \\frac{\\hat{p}_1 - \\hat{p}_2}{\\sqrt{\\hat{p}(1-\\hat{p})\\left(\\frac{1}{n_1} + \\frac{1}{n_2}\\right)}}$$\n\nwhere\n\n$\\hat{p}_1$ and $\\hat{p}_2$ are the sample proportions for the two samples,\n\n$\\hat{p}$ is the pooled proportion,\n\n$n_1$ and $n_2$ are the sample sizes for the two samples.\n\nThe pooled proportion is calculated as:\n\n$$\\hat{p} = \\frac{x_1 + x_2}{n_1 + n_2}$$\n\nOnce again the `prop.test()` function in R can help us out. The `prop.test()` function can the number of successes and the total number of trials for each sample as arguments and return a p-value for the comparison. Use the argument `correct = FALSE` in the function to get the correct results. Remember that the `prop.test()` function will list the test statistic as an X-squared value, which is the square of the z-score. The p-value stays the same as listed in the output.\n\n::: column-margin\n\n**TIP**:Use the `?prop.test` command in the R console to get more information about the `prop.test()` function, including which arguments it takes and what it returns.\n\n**NOTE**: `prop.test` can take the form `prop.test(c(x1, x2), c(n1, n2))` where `x1` and `x2` are the number of successes in each sample and `n1` and `n2` are the total number of trials in each sample.\n\n:::\n\nBelow is an example of how the `prop.test()` function could be used to compare two proportions (10/100 and 20/100) at the 95% confidence level with a two-sided alternative hypothesis: \n\n::: column-margin\n\n**NOTE**: If we were using the test statistic to compare the critical value, we would have to take the square root of the X-squared value to get the z-score (the z-Score is our test statistic).\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsqrt(3.9216)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] 1.980303\n```\n\n\n:::\n:::\n\n\nThe z-score would then be compared to the critical value for the desired confidence level. Since we know that the critical values for a two-sided test at the 95% confidence level are -1.96 and 1.96, we can see that the z-score of $\\pm 1.98$ falls in the rejection region.\n\n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\nprop.test(c(10, 20), c(100, 100), \n          conf.level = 0.95,\n          alternative = 'two.sided', \n          correct = FALSE)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n\n\t2-sample test for equality of proportions without continuity correction\n\ndata:  c(10, 20) out of c(100, 100)\nX-squared = 3.9216, df = 1, p-value = 0.04767\nalternative hypothesis: two.sided\n95 percent confidence interval:\n -0.197998199 -0.002001801\nsample estimates:\nprop 1 prop 2 \n   0.1    0.2 \n```\n\n\n:::\n:::\n\n\nThe `prop.test()` function returns a p-value for the comparison, which in this case is .048. Since this value is less than our $\\alpha$ of .05, we would reject the null hypothesis that the two proportions are equal and conclude that there is enough evidence to suggest that the two true proportions are different.\n\n\n::: {.callout-note title=\"Exercise 6: Comparing Two Proportions\"}\n\nOf the cuts in golf, the **fairway** is generally considered to be the most desirable place to hit the ball. Shorter grass is widely believed to make it easier to hit the green in regulation. \n\nThe **bunker**, on the other hand, is often considered to be one of the most difficult places to hit the ball from. The sand can make it difficult to control the ball and hit it accurately. Additionally, no practice swings are allowed to hit the sand in the **bunker** making it more difficult to get a feel for the shot.\n\n::: column-margin\n\nLearn about rules about hitting out of the bunkers in golf in the video below:\n\n\n{{< video https://www.youtube.com/embed/T9_gXqAE6ZY >}}\n\n\n\n:::\n\nIn the `scheffler_2023` dataset there is also a cut called **\"Other\"**. This includes shots from the rough, waste areas, mulch and more. These are also often expected to be tougher than the fairway but slightly easier to hit out of than bunkers, but not always. Our summarization of the probabilities from different cuts earlier confirmed a slightly higher probability of hitting the green in regulation from the **\"Other\"** cut compared to the bunker cut.\n\nUse the `prop.test()` function to compare the proportion of greens hit in regulation by Scottie Scheffler from the **fairway** and the **bunker**. Make the alternative hypothesis that the proportion of greens hit in regulation from the fairway is **greater** than the proportion of greens hit in regulation from the bunker. Use the **95% confidence level**. Set **correct = FALSE**.\n\n:::column-margin\n\n**TIP**: The alternative hypothesis can be set to `'greater'`, `'less'`, or `'two.sided'` using the `alternative` argument in the `prop.test()` function.\n\n**TIP**: Remember that the test statistic is **z** which is the square root of the X-squared value output by the `prop.test()` function.\n\n:::\n\na. What is the value of the **test statistic**?\n\nb. What is the **critical value** for the test?\n\nc. Is the **test statistic** in the **rejection region**?\n\nd. What is the **p-value** of the test?\n\ne. Is **0** included in the confidence interval for the difference in proportions?\n\nf. Based on your answers above, what is your **conclusion** about the  two proportions?\n\nUse the `prop.test()` function to compare the proportion of greens hit in regulation by Scottie Scheffler from the **Other** cut and the **Bunker**. Make the alternative hypothesis that the proportion of greens hit in regulation from the **Other** cut is **greater** than the proportion of greens hit in regulation from the **Bunker**. Use the **95% confidence level**. Set **correct = FALSE**.\n\ng. What is the value of the **test statistic**?\n\nh. What is the **p-value** of the test?\n\ni. Is **0** included in the confidence interval for the difference in proportions?\n\nj. Based on your answers above, what is your **conclusion** about the two proportions?\n\nk. If you were giving advice to Scottie Scheffler on a par 4 hole with rough on the left and a bunker on the right and he asked which would be better to hit out of, what would you tell him?\n\n:::\n\n# More Practice\n\n::: {.callout-note title=\"Challenge Problems\"}\n\nScottie Scheffler is not the only great golfer on the PGA Tour. In the [pga_girs](pga_girs.csv) dataset there is data on the greens hit in regulation by PGA professionals from 2019-2023. The data is structured identically to the `scheffler_2023` dataset.\n\n::: column-margin\n\nRory McIlroy is one of the most popular and best golfers on the PGA Tour. He has won multiple major championships. He is known for his long drives and his picturesque swing.\n\n![Rory McIlroy](https://upload.wikimedia.org/wikipedia/commons/1/1b/Rory_McIlroy_finishes_long_iron_stroke.jpg)\n\nImage Source: <a href=\"https://commons.wikimedia.org/wiki/File:Rory_McIlroy_finishes_long_iron_stroke.jpg\">TourProGolfClubs</a>, <a href=\"https://creativecommons.org/licenses/by/2.0\">CC BY 2.0</a>, via Wikimedia Commons\n\n:::\n\n::: {.callout-note title=\"Challenge 1: Two Player Comparison\"}\n\n:::column-margin\n**HINT**: Read in the data and create a McIlroy 2023 dataset with the code below:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npga_girs <- read.csv(\"pga_girs.csv\")\nmcilroy_2023 <- filter(pga_girs, player == \"Rory McIlroy\", year == 2023)\n```\n:::\n\n\n:::\n\n\n1. Compare Scottie Scheffler's approach shots in 2023 to Rory McIlroy's approach shots in 2023. \n\na. Use the `prop.test()` function to compare the proportion of greens hit in regulation by Scottie Scheffler from the **fairway** to the proportion of greens hit in regulation by Rory McIlroy from the **fairway**. Make the alternative hypothesis that the proportion of greens hit in regulation from the fairway by Scottie Scheffler is greater than the proportion of greens hit in regulation from the fairway by Rory McIlroy. Use the **95% confidence level**. Set **correct = FALSE**.\n    \nb. How big is the **difference** in the sample proportion of greens hit in regulation from the fairway between Scottie Scheffler and Rory McIlroy (round to the nearest hundreth)?\n    \nc. Is there enough evidence to conclude that Scottie Scheffler is better at hitting greens in regulation from the fairway than Rory McIlroy? Explain your answer.\n\nd. Compare the proportion of greens hit in regulation by Scottie Scheffler from the **bunker** to the proportion of greens hit in regulation by Rory McIlroy from the **bunker**. Make the alternative hypothesis that the proportion of greens hit in regulation from the bunker by Scottie Scheffler is greater than the proportion of greens hit in regulation from the bunker by Rory McIlroy. Use the **95% confidence level**. Set **correct = FALSE**.\n    \ne. How big is the **difference** in the sample proportion of greens hit in regulation from the bunker between Scottie Scheffler and Rory McIlroy (round to the nearest hundreth)?\n    \nf. What is your **conclusion** about Scheffler's and McIlroy's approaches from the bunker?\n    \ng. Explain why it might be more difficult to find a significant difference in the proportion of greens hit in regulation from the bunker compared to the fairway, even if the difference in the sample proportions from the bunker is larger than the difference from the fairway.\n    \n\n:::\n\n::: {.callout-note title=\"Challenge 2: Past Comparisons\"}\n\n2. Scottie Scheffler skyrocketed up the world golf rankings from 2019-2023. His world golf ranking went from 66 to 31 to 12 to 2 and finally to number 1 (at the end of each season respectively). Take a look at whether Scottie Scheffler's Greens in Regulation from different cuts improved during his climb to the top. Filter the `pga_girs` dataset to only include data from Scottie Scheffler. \n\n::: column-margin\n<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>\n\nBelow is a graph of Scottie Scheffler's rapid climb up the world golf rankings from the end of 2019 to the end of 2023.\n\n\n::: {.cell}\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n:::\n    \na. Use filter, mutate, and arrange to calculate Scheffler's GIR from the fairway each season. Which season is it the highest?\n    \nb. Which season is it the lowest?\n    \nc. Use the `prop.test()` function to compare the proportion of greens hit in regulation by Scottie Scheffler from the **fairway** in 2020 to the proportion of greens hit in regulation by Scottie Scheffler from the **fairway** in 2021 Make the alternative hypothesis that the proportion of greens hit in regulation from the fairway by Scottie Scheffler in 2020 is less than the proportion of greens hit in regulation from the fairway by Scottie Scheffler in 2021. Use the **95% confidence level**. Set **correct = FALSE**.\n\nd. Use the `prop.test()` function to compare the proportion of greens hit in regulation by Scottie Scheffler from the **Other** cut in 2021 to the proportion of greens hit in regulation by Scottie Scheffler from the **Other** cut in 2022. Make the alternative hypothesis that the proportion of greens hit in regulation from the fairway by Scottie Scheffler in 2021 is less than the proportion of greens hit in regulation from the fairway by Scottie Scheffler in 2022. Use the **95% confidence level**. Set **correct = FALSE**.\n    \n:::\n    \n:::column-margin\n<br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br>\n\n**HINT**: Use the code below to filter the data:\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntop_bunker_players <- pga_girs |> \n  filter(cut == \"Bunker\", holes < 25, year == 2023) |> \n  mutate(gir = greens / holes) |>\n  arrange(desc(gir)) |> \n  slice(1, n())\n```\n:::\n\n\n:::\n\n::: {.callout-note title=\"Challenge 3: Changing Conditions\"}\n\n3. Find the best and worst bunker players in 2023 who took less than 25 approach shots from the bunker.\n\na. Test the hypothesis that the proportion of greens hit in regulation from the bunker by the best bunker player is greater than the proportion of greens hit in regulation from the bunker by the worst bunker player. Use the **90% confidence level**. Set **correct = FALSE**.\n    \nb. Test the hypothesis that the proportion of greens hit in regulation from the fairway by the best bunker player is greater than the proportion of greens hit in regulation from the fairway by the worst bunker player. Use the **99% confidence level**. Set **correct = FALSE**.\n    \nc. Do you get differing results when you change the confidence level? If yes, explain why.\n:::\n\n\n:::\n",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}