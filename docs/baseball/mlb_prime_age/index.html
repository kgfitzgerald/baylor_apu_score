<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.554">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Jazmine Gurrola">
<meta name="author" content="Joseph Hsieh">
<meta name="author" content="Dat Tran">
<meta name="author" content="Katie Fitzgerald">
<meta name="dcterms.date" content="2024-07-26">
<meta name="description" content="Use data wrangling skills to explore the prime age of MLB players">

<title>Baylor APU SCORE Module Preprint Repository - What’s the prime age of an MLB player?</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<script src="../../site_libs/cookie-consent/cookie-consent.js"></script>
<link href="../../site_libs/cookie-consent/cookie-consent.css" rel="stylesheet">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script async="" src="https://www.googletagmanager.com/gtag/js?id=G-JVDQHPRYT1"></script>

<script type="text/plain" cookie-consent="tracking">

window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-JVDQHPRYT1', { 'anonymize_ip': true});
</script>

<script type="text/javascript" charset="UTF-8">
document.addEventListener('DOMContentLoaded', function () {
cookieconsent.run({
  "notice_banner_type":"simple",
  "consent_type":"implied",
  "palette":"light",
  "language":"en",
  "page_load_consent_levels":["strictly-necessary","functionality","tracking","targeting"],
  "notice_banner_reject_button_hide":false,
  "preferences_center_close_button_hide":false,
  "website_name":""
  ,
"language":"en"
  });
});
</script> 
  


</head>

<body class="nav-sidebar floating nav-fixed slimcontent">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../../index.html">
    <span class="navbar-title">Baylor APU SCORE Module Preprint Repository</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../by-statsds-topic.html" aria-current="page"> 
<span class="menu-text">Modules By Topic</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="https://data.scorenetwork.org/"> 
<span class="menu-text">Data Repository</span></a>
  </li>  
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../baseball/mlb_injuries/index.html">Baseball</a></li><li class="breadcrumb-item"><a href="../../baseball/mlb_prime_age/index.html">What’s the prime age of an MLB player?</a></li></ol></nav>
        <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../by-statsds-topic.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Modules By Topic</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false">
 <span class="menu-text">Anw</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../anw/kaplan_meier/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">American Ninja Warrior - Kaplan-Meier Survival Analyis</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">Baseball</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../baseball/mlb_injuries/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MLB Injuries - Introductory Time Series Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../baseball/mlb_prime_age/index.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">What’s the prime age of an MLB player?</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false">
 <span class="menu-text">Golf</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../golf/pga_gir/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PGA - Scheffler Greens in Regulation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../golf/pga_gir_nor/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PGA - Scheffler Greens in Regulation (No R)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../golf/pga_masters/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PGA - Scoring Average Confidence Intervals</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../golf/pga_masters_nor/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">PGA - Scoring Average Confidence Intervals (No R)</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false">
 <span class="menu-text">Mma</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../mma/mma_chisquare/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MMA Fight Decisions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false">
 <span class="menu-text">Soccer</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../soccer/mls_decision_errors/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">MLS - Types of Decision Errors</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false">
 <span class="menu-text">Tennis</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../tennis/tennis_sampsize/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Tennis Sample Size</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false">
 <span class="menu-text">Volleyball</span></a>
          <a class="sidebar-item-toggle text-start collapsed" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="false" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 ">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../volleyball/ncaa_d1/index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Volleyball - Women’s NCAA Division I</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
    <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#getting-started" id="toc-getting-started" class="nav-link" data-scroll-target="#getting-started">Getting started</a>
  <ul class="collapse">
  <li><a href="#data" id="toc-data" class="nav-link" data-scroll-target="#data">Data</a></li>
  </ul></li>
  <li><a href="#prime-age" id="toc-prime-age" class="nav-link" data-scroll-target="#prime-age">Prime Age:</a>
  <ul class="collapse">
  <li><a href="#batters" id="toc-batters" class="nav-link" data-scroll-target="#batters">Batters</a></li>
  <li><a href="#pitchers" id="toc-pitchers" class="nav-link" data-scroll-target="#pitchers">Pitchers</a></li>
  </ul></li>
  <li><a href="#for-fun" id="toc-for-fun" class="nav-link" data-scroll-target="#for-fun">FOR FUN</a></li>
  </ul>
</nav>
</nav>
<div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    </div>
<!-- main -->
<main class="content page-columns page-full" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../../baseball/mlb_injuries/index.html">Baseball</a></li><li class="breadcrumb-item"><a href="../../baseball/mlb_prime_age/index.html">What’s the prime age of an MLB player?</a></li></ol></nav>
<div class="quarto-title">
<h1 class="title">What’s the prime age of an MLB player?</h1>
  <div class="quarto-categories">
    <div class="quarto-category">Data wrangling</div>
    <div class="quarto-category">Dplyr basics</div>
    <div class="quarto-category">Tidyverse</div>
  </div>
  </div>

<div>
  <div class="description">
    Use data wrangling skills to explore the prime age of MLB players
  </div>
</div>

<div class="quarto-title-meta-author">
  <div class="quarto-title-meta-heading">Authors</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author">Jazmine Gurrola </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Azusa Pacific University
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Joseph Hsieh </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Azusa Pacific University
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Dat Tran </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Azusa Pacific University
          </p>
      </div>
    <div class="quarto-title-meta-contents">
    <p class="author">Katie Fitzgerald <a href="mailto:kfitzgerald@apu.edu" class="quarto-title-author-email"><i class="bi bi-envelope"></i></a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            Azusa Pacific University
          </p>
      </div>
  </div>

<div class="quarto-title-meta">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">July 26, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header>


<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Facilitation notes">
<div class="callout-header d-flex align-content-center" data-bs-toggle="collapse" data-bs-target=".callout-1-contents" aria-controls="callout-1" aria-expanded="false" aria-label="Toggle callout">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Facilitation notes
</div>
<div class="callout-btn-toggle d-inline-block border-0 py-1 ps-1 pe-0 float-end"><i class="callout-toggle"></i></div>
</div>
<div id="callout-1" class="callout-1-contents callout-collapse collapse">
<div class="callout-body-container callout-body">
<ul>
<li><p>This module would be suitable for an in-class lab or take-home assignment in an introductory data science course that uses R.</p></li>
<li><p>It assumes a basic familiarity with the RStudio Environment and basic introduction to the <code>tidyverse</code> has already been covered, but tips on tidyverse code are provided throughout.</p></li>
<li><p>Students should be provided with the following data files (.rds) and Quarto document (.qmd) to produce visualizations and write up their answers to each exercise. Their final deliverable is to turn in an .html document produced by “Rendering” the .qmd.</p>
<ul>
<li><a href="batter_stats.csv">batter_stats.csv</a></li>
<li><a href="pitcher_stats.csv">pitcher_stats.csv</a></li>
<li><a href="student_template.qmd">Student Quarto template</a></li>
</ul></li>
<li><p><a href="https://posit.cloud/">Posit Cloud</a> (via an Instructor account) or <a href="https://classroom.github.com">Github classroom</a> are good options for disseminating files to students, but simply uploading files to your university’s course management system works, too.</p></li>
</ul>
</div>
</div>
</div>
<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>In this module you will be analyzing data on Major League Baseball (MLB) players from the 2014 - 2023 seasons. The goal of this module is to practice your data wrangling skills while investigating the question <em>“at what age do professional baseball players typically reach their prime?”</em></p>
<div class="callout callout-style-simple callout-note no-icon callout-titled" title="Learning Objectives">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Learning Objectives
</div>
</div>
<div class="callout-body-container callout-body">
<p>By the end of this module, you will be able to:</p>
<ul>
<li>Wrangle your data into a form that allows you to answer a research question of interest</li>
<li>Use <code>dplyr</code> verbs to accomplish data wrangling tasks such as:
<ul>
<li>creating a new variable (<code>mutate()</code>),</li>
<li><code>filter()</code>ing the data to keep or exclude rows that meet a criteria</li>
<li>computing a statistic for each level of a categorical variable using <code>group_by()</code></li>
<li>quickly viewing the data with <code>slice()</code> or <code>glimpse()</code></li>
<li>keeping only unique observations using <code>distinct()</code></li>
<li>sorting the data using <code>arrange()</code></li>
</ul></li>
<li>Develop and implement a code strategy to accomplish a necessary wrangling task</li>
<li>Use visualization to investigate a research question</li>
</ul>
</div>
</div>
</section>
<section id="getting-started" class="level1">
<h1>Getting started</h1>
<p>We’ll get started by loading necessary packages and datasets.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a>batter_stats <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"batter_stats.csv"</span>)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a>pitcher_stats <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"pitcher_stats.csv"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<section id="data" class="level2">
<h2 class="anchored" data-anchor-id="data">Data</h2>
<p>This data was curated via the <a href="https://billpetti.github.io/baseballr/articles/baseballr.html"><code>baseballr</code> package</a>, which has built in functions for acquiring a plethora of baseball data. In particular, data for this module was pulled in May 2024 using the <code>fg_batter_leaders()</code> and <code>fg_pitcher_leaders()</code> functions, which provide over 300 variables of statistics on batters and pitchers beginning with the 1974 season. This analysis engages with only a small subset of available variables and seasons, but we encourage baseball enthusiasts and aspiring analysts to check out all the <code>baseballr</code> package has to offer.</p>
<details>
<summary>
<b>Variable Descriptions (all players) </b>
</summary>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 87%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>x_mlbamid</code></td>
<td>unique MLB player id</td>
</tr>
<tr class="even">
<td><code>season</code></td>
<td>season the row of data comes from</td>
</tr>
<tr class="odd">
<td><code>team_name</code></td>
<td>three-character MLB team abbreviation</td>
</tr>
<tr class="even">
<td><code>player_name</code></td>
<td>first and last name of MLB player</td>
</tr>
<tr class="odd">
<td><code>age</code></td>
<td>age of MLB during the corresponding season</td>
</tr>
<tr class="even">
<td><code>war</code></td>
<td>Wins Above Replacement - an estimation of the amount of wins the player would bring to the team, above a regular replacement level player. It measures the value of a player and how much better they are than an “average” one.</td>
</tr>
<tr class="odd">
<td><code>g</code></td>
<td>number of games the player played during the corresponding season</td>
</tr>
</tbody>
</table>
<details>
<summary>
<b>Variable Descriptions (batters only) </b>
</summary>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 87%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>bats</code></td>
<td>whether player bats right-handed or left-handed</td>
</tr>
<tr class="even">
<td><code>ab</code></td>
<td>number of at bats the player had during the corresponding season</td>
</tr>
<tr class="odd">
<td><code>pa</code></td>
<td>number of plate appearances the player had during the corresponding season</td>
</tr>
<tr class="even">
<td><code>h</code></td>
<td>number of hits the player had during the corresponding season</td>
</tr>
<tr class="odd">
<td><code>x1b</code></td>
<td>number of singles the player hit during the corresponding season</td>
</tr>
<tr class="even">
<td><code>x2b</code></td>
<td>number of doubles the player hit during the corresponding season</td>
</tr>
<tr class="odd">
<td><code>x3b</code></td>
<td>number of triples the player hit during the corresponding season</td>
</tr>
<tr class="even">
<td><code>hr</code></td>
<td>number of home runs the player hit during the corresponding season</td>
</tr>
<tr class="odd">
<td><code>r</code></td>
<td>number of runs the player had during the corresponding season</td>
</tr>
<tr class="even">
<td><code>rbi</code></td>
<td>number of runs batted in the player had during the corresponding season</td>
</tr>
</tbody>
</table>
<details>
<summary>
<b>Variable Descriptions (pitchers only) </b>
</summary>
<table class="table">
<colgroup>
<col style="width: 12%">
<col style="width: 87%">
</colgroup>
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>throws</code></td>
<td>number of runs batted in the player had during the corresponding season</td>
</tr>
<tr class="even">
<td><code>ip</code></td>
<td>number of innings the player pitched during the corresponding season</td>
</tr>
<tr class="odd">
<td><code>era</code></td>
<td>Earned Run Average: average number of earned runs given up by a pitcher per nine innings pitched during the corresponding season</td>
</tr>
<tr class="even">
<td><code>whip</code></td>
<td>Walks plus Hits per Inning Pitched. A measure of the number of base-runners a pitcher has allowed per inning pitched during the corresponding season.</td>
</tr>
<tr class="odd">
<td><code>pitches</code></td>
<td>total number of pitches thrown by the pitcher during the corresponding season.</td>
</tr>
<tr class="even">
<td><code>balls</code></td>
<td>total number of pitches thrown by the pitcher that were called as balls during the corresponding season.</td>
</tr>
<tr class="odd">
<td><code>strikes</code></td>
<td>total number of pitches thrown by the pitcher that were called as strikes during the corresponding season.</td>
</tr>
</tbody>
</table>
</details></details></details></section>
</section>
<section id="prime-age" class="level1 page-columns page-full">
<h1>Prime Age:</h1>
<div class="callout callout-style-default callout-caution no-icon callout-titled" title="Research question">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Research question
</div>
</div>
<div class="callout-body-container callout-body">
<p>At what age do professional baseball players tend to be at their “prime”?</p>
</div>
</div>
<p>There are many different aspects of a player’s performance that determine how well he is playing. One comprehensive metric is called WAR, which stands for “wins above replacement.” The MLB provides the following definition of WAR:</p>
<blockquote class="blockquote">
<p>“WAR measures a player’s value in all facets of the game by deciphering how many more wins he’s worth than a replacement-level player at his same position (e.g., a Minor League replacement or a readily available fill-in free agent).” - <a href="https://www.mlb.com/glossary/advanced-stats/wins-above-replacement">MLB.com</a></p>
</blockquote>
<p>Therefore, one reasonable way to determine a player’s prime age would be to determine the age at which he had his highest WAR.</p>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
What’s a good WAR?
</div>
</div>
<div class="callout-body-container callout-body">
<p>A decent WAR is typically around 2, while All-star players typically have a WAR anywhere between 3 and 6, and MVP-level players tend to have a WAR above 6.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Batters vs Pitchers
</div>
</div>
<div class="callout-body-container callout-body">
<p>WAR is calculated differently for batters and pitchers; they play different roles in the game and therefore they have different stats that capture their performance. We will therefore analyze batters and pitchers separately.</p>
</div>
</div>
<section id="batters" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="batters">Batters</h2>
<div class="callout callout-style-default callout-caution no-icon callout-titled" title="Research question">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Research question
</div>
</div>
<div class="callout-body-container callout-body">
<p>What is the average age a batter in the MLB reaches his prime?</p>
</div>
</div>
<p>Let’s first note how our data is organized:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(batter_stats)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 18
  x_mlbamid season team_name bats  player_name       age   war     g    ab    pa
      &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
1    545361   2014 LAA       R     Mike Trout         22  8.29   157   602   705
2    457763   2014 SFG       R     Buster Posey       27  7.52   147   547   605
3    518960   2014 MIL       R     Jonathan Lucroy    28  7.44   153   585   655
4    457705   2014 PIT       R     Andrew McCutch…    27  7.40   146   548   648
5    519317   2014 MIA       R     Giancarlo Stan…    24  6.85   145   539   638
6    488726   2014 CLE       L     Michael Brantl…    27  6.53   156   611   676
# ℹ 8 more variables: h &lt;dbl&gt;, x1b &lt;dbl&gt;, x2b &lt;dbl&gt;, x3b &lt;dbl&gt;, hr &lt;dbl&gt;,
#   r &lt;dbl&gt;, rbi &lt;dbl&gt;, best_war &lt;dbl&gt;</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><br>
<strong>CODE TIP</strong>: The function <code>head()</code> returns the first 6 rows of a dataset, and the function <code>tail()</code> returns the last 6. You can add the argument <code>n =</code> to display a different number of rows. Note these are base R functions and do not require the tidyverse to use.</p>
</div></div><p>If we <code>arrange</code> by <code>x_mlbaid</code> we can see that there can be multiple observations per player, where each row represents a different season.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>batter_stats <span class="sc">|&gt;</span> </span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(x_mlbamid) <span class="sc">|&gt;</span> </span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">slice</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">10</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 10 × 18
   x_mlbamid season team_name bats  player_name    age     war     g    ab    pa
       &lt;dbl&gt;  &lt;dbl&gt; &lt;chr&gt;     &lt;chr&gt; &lt;chr&gt;        &lt;dbl&gt;   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
 1    110029   2014 NYM       L     Bobby Abreu     40 -0.213     78   133   155
 2    112526   2014 NYM       R     Bartolo Col…    41 -0.588     31    62    69
 3    112526   2015 NYM       R     Bartolo Col…    42 -0.0408    33    58    64
 4    112526   2016 NYM       R     Bartolo Col…    43 -0.243     34    60    65
 5    112526   2017 - - -     R     Bartolo Col…    44 -0.266     28    19    20
 6    112526   2018 TEX       R     Bartolo Col…    45 -0.0475    28     4     4
 7    114739   2014 CLE       L     Jason Giambi    43 -0.496     26    60    70
 8    115629   2014 COL       R     LaTroy Hawk…    41 -0.0141    57     1     1
 9    115629   2015 - - -     R     LaTroy Hawk…    42 -0.0146    42     1     1
10    116338   2014 DET       R     Torii Hunter    38  1.11     142   549   586
# ℹ 8 more variables: h &lt;dbl&gt;, x1b &lt;dbl&gt;, x2b &lt;dbl&gt;, x3b &lt;dbl&gt;, hr &lt;dbl&gt;,
#   r &lt;dbl&gt;, rbi &lt;dbl&gt;, best_war &lt;dbl&gt;</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p>&nbsp;<strong>The pipe</strong>: Recall that <code>|&gt;</code> is called the “pipe” function and can be read as “and then.” In English, the code on the left can be read as “take the <code>batter_stats</code> data and then <code>arrange</code> it by <code>x_mlbamid</code> and then <code>slice</code> the first 10 rows.” Mathematically, the pipe accomplishes <code>f(g(x))</code> with the (psudeo-)code <code>x |&gt; g() |&gt; f()</code>. Read more about the pipe <a href="https://r4ds.hadley.nz/data-transform#sec-the-pipe">here</a>.</p>
</div><div class="">
<p><strong>dplyr:</strong> <code>arrange()</code> and <code>slice()</code> are examples of <code>dplyr</code> verbs: <code>tidyverse</code> functions that <em>do</em> something to / <em>act</em> on the data. Other examples include <code>filter()</code>, <code>select()</code>, <code>mutate()</code>, <code>group_by()</code>, <code>summarize()</code>, <code>relocate()</code>, and many more. These verbs are often chained together with the pipe to accomplish multiple data wrangling tasks. Read more about data wrangling with <code>dplyr</code> <a href="https://r4ds.hadley.nz/data-transform">here</a>.</p>
</div></div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 1:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Which seasons are included in this data?</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><strong>TIP:</strong> Try writing your answer as a full sentence in the .qmd using <a href="https://quarto.org/docs/computations/inline-code.html">inline code</a>. For example, if you have the first season saved in an object <code>first_season</code>, then including `<code>r</code> <code>first_season</code>` outside a code chunk will allow you to auto-populate this value in a sentence.</p>
</div></div><div class="callout callout-style-default callout-important no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Important
</div>
</div>
<div class="callout-body-container callout-body">
<p>In order to determine the prime age of each player, we need to look for the year in which his <code>war</code> reached its player-specific maximum. We can utilize the <code>group_by()</code> function to do this.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 2:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Copy, paste the following code and fill in the blanks to create a new variable <code>best_war</code> that contains a player’s maximum <code>war</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>batter_stats <span class="ot">&lt;-</span> batter_stats <span class="sc">|&gt;</span> </span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(________) <span class="sc">|&gt;</span> </span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">_______ =</span> <span class="fu">_______</span>(_______)) <span class="sc">|&gt;</span> </span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><strong>CODE TIP</strong>: <code>group_by()</code> allows all subsequent actions to be done for <em>each group</em> of the grouping variable. Therefore, if we group by player id, we’re able to determine the maximum <code>war</code> for each player, not simply the maximum <code>war</code> for the whole dataset. It’s often a good idea to <code>ungroup()</code> at the end of a chain of code, otherwise the next time you try to use your data, it will still perform every operation by group.</p>
</div></div><p>Take a quick <code>glimpse()</code> of your data to confirm the first few values of <code>best_war</code> match those below before proceeding.</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 13,917
Columns: 18
$ x_mlbamid   &lt;dbl&gt; 545361, 457763, 518960, 457705, 519317, 488726, 543685, 43…
$ season      &lt;dbl&gt; 2014, 2014, 2014, 2014, 2014, 2014, 2014, 2014, 2014, 2014…
$ team_name   &lt;chr&gt; "LAA", "SFG", "MIL", "PIT", "MIA", "CLE", "WSN", "TOR", "P…
$ bats        &lt;chr&gt; "R", "R", "R", "R", "R", "L", "R", "R", "R", "R", "R", "R"…
$ player_name &lt;chr&gt; "Mike Trout", "Buster Posey", "Jonathan Lucroy", "Andrew M…
$ age         &lt;dbl&gt; 22, 27, 28, 27, 24, 27, 24, 33, 31, 35, 28, 28, 31, 23, 30…
$ war         &lt;dbl&gt; 8.2866, 7.5222, 7.4368, 7.4014, 6.8473, 6.5310, 6.4054, 6.…
$ g           &lt;dbl&gt; 157, 147, 153, 146, 145, 156, 153, 155, 111, 148, 148, 158…
$ ab          &lt;dbl&gt; 602, 547, 585, 548, 539, 611, 613, 553, 379, 549, 574, 608…
$ pa          &lt;dbl&gt; 705, 605, 655, 648, 638, 676, 683, 673, 460, 614, 644, 695…
$ h           &lt;dbl&gt; 173, 170, 176, 172, 155, 200, 176, 158, 110, 178, 163, 155…
$ x1b         &lt;dbl&gt; 89, 118, 108, 103, 86, 133, 110, 96, 79, 125, 102, 93, 134…
$ x2b         &lt;dbl&gt; 39, 28, 53, 38, 31, 45, 39, 27, 20, 33, 34, 31, 37, 37, 34…
$ x3b         &lt;dbl&gt; 9, 2, 2, 6, 1, 2, 6, 0, 0, 1, 4, 2, 2, 9, 1, 1, 2, 1, 3, 1…
$ hr          &lt;dbl&gt; 36, 22, 13, 25, 37, 20, 21, 35, 11, 19, 23, 29, 14, 16, 19…
$ r           &lt;dbl&gt; 115, 72, 73, 89, 89, 94, 111, 101, 45, 79, 95, 93, 77, 92,…
$ rbi         &lt;dbl&gt; 111, 89, 69, 83, 105, 97, 83, 103, 67, 77, 73, 98, 82, 69,…
$ best_war    &lt;dbl&gt; 9.4559, 7.5222, 7.4368, 7.4014, 6.8473, 6.5310, 6.7801, 6.…</code></pre>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><strong>CODE TIP</strong>: In real life data science work, you won’t usually be provided with the “corect” answer to compare to, so it’s often a good idea to do a quick check after any data transformation to make sure your code did what you expected. In this case, you might choose one player to verify that their <code>best_war</code> value is in fact equal to their maximum <code>war</code> value. You can do a quick <code>filter</code> for that player in your console, or use the search feature when <code>View</code>ing the full data in spreadsheet view.</p>
</div></div><div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 3:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Create a new dataset called <code>prime_age</code> that keeps only the rows where a player’s <code>war</code> is equal to his <code>best_war</code>.</p>
<p>What are the dimensions of this new dataset?</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><br>
<em>Hint:</em> what <a href="https://r4ds.hadley.nz/data-transform#rows"><code>dyplr</code> verb</a> do you need to keep rows that meet a criteria?</p>
</div></div><p>Ideally, we want there to be one row per player in our new dataset. However, if we check the number of unique players we have in our original data, we find this does not match the number of rows in <code>prime_age</code>.</p>

<div class="no-row-height column-margin column-container"><div class="">
<p><strong>CODE TIP</strong>: Two options for checking the number of unique levels of a variable are <code>length(unique(data$variable))</code> or <code>data |&gt; distinct(variable) |&gt; nrow()</code></p>
</div></div><div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 4:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Report the number of unique players in the dataset <code>batter_stats</code>.</p>
<p>Inspect the <code>prime_age</code> data more closely. What is the maximum number of rows that appear for a player in this dataset? Comment on why this is happening. <em>Hint: creating a new variable that counts the number of rows per id can help you investigate this.</em></p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><strong>CODE TIP</strong>: <code>group_by(grouping_variable)</code> followed by <code>mutate(n = n())</code> will count the number of rows per level of the grouping variable.</p>
</div></div><div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 5:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Determine a strategy for reducing <code>prime_age</code> down to one row per person (still maintaining all relevant columns). Describe your strategy in words and then write code to accomplish it. Careful - don’t just arbitrarily throw away rows! There are multiple ways you might approach this, but you should justify your decision(s) and think through implications for your ultimate analysis goal: estimating prime age.</p>
</div>
</div>
<p>Your reduced <code>prime_age</code> should look something like this:</p>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code>Rows: 3,752
Columns: 18
$ x_mlbamid   &lt;dbl&gt; 457763, 518960, 457705, 519317, 488726, 430832, 431145, 13…
$ season      &lt;dbl&gt; 2014, 2014, 2014, 2014, 2014, 2014, 2014, 2014, 2014, 2014…
$ team_name   &lt;chr&gt; "SFG", "MIL", "PIT", "MIA", "CLE", "TOR", "PIT", "TEX", "M…
$ bats        &lt;chr&gt; "R", "R", "R", "R", "L", "R", "R", "R", "R", "R", "L", "L"…
$ player_name &lt;chr&gt; "Buster Posey", "Jonathan Lucroy", "Andrew McCutchen", "Gi…
$ age         &lt;dbl&gt; 27, 28, 27, 24, 27, 33, 31, 35, 28, 23, 30, 24, 27, 35, 29…
$ war         &lt;dbl&gt; 7.5222, 7.4368, 7.4014, 6.8473, 6.5310, 6.1703, 6.1427, 5.…
$ g           &lt;dbl&gt; 147, 153, 146, 145, 156, 155, 111, 148, 148, 148, 156, 140…
$ ab          &lt;dbl&gt; 547, 585, 548, 539, 611, 553, 379, 549, 574, 558, 563, 524…
$ pa          &lt;dbl&gt; 605, 655, 648, 638, 676, 673, 460, 614, 644, 640, 643, 616…
$ h           &lt;dbl&gt; 170, 176, 172, 155, 200, 158, 110, 178, 163, 165, 150, 150…
$ x1b         &lt;dbl&gt; 118, 108, 103, 86, 133, 96, 79, 125, 102, 103, 96, 89, 103…
$ x2b         &lt;dbl&gt; 28, 53, 38, 31, 45, 27, 20, 33, 34, 37, 34, 28, 35, 37, 18…
$ x3b         &lt;dbl&gt; 2, 2, 6, 1, 2, 0, 0, 1, 4, 9, 1, 1, 2, 1, 1, 3, 1, 7, 3, 2…
$ hr          &lt;dbl&gt; 22, 13, 25, 37, 20, 35, 11, 19, 23, 16, 19, 32, 36, 16, 21…
$ r           &lt;dbl&gt; 72, 73, 89, 89, 94, 101, 45, 79, 95, 92, 87, 89, 80, 85, 7…
$ rbi         &lt;dbl&gt; 89, 69, 83, 105, 97, 103, 67, 77, 73, 69, 74, 78, 107, 82,…
$ best_war    &lt;dbl&gt; 7.5222, 7.4368, 7.4014, 6.8473, 6.5310, 6.1703, 6.1427, 5.…</code></pre>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 6:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Produce a visualization that explores the distribution of prime ages, for all players in this data.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 7:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Based on the graph, “eyeball” an initial answer to the research question: at what age do professional batters tend to be at their “prime”?</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 8:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Calculate the mean and the median prime age for batters in this data.</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 9:
</div>
</div>
<div class="callout-body-container callout-body">
<p>Reproduce your graph from above but add 2 lines to the graph representing the mean and median of the distribution.</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><br>
<strong>Tip</strong>: Add a layer called <code>geom_vline</code> to your ggplot code. Make sure the colors of the lines are different.</p>
</div></div></section>
<section id="pitchers" class="level2 page-columns page-full">
<h2 class="anchored" data-anchor-id="pitchers">Pitchers</h2>
<div class="callout callout-style-default callout-caution no-icon callout-titled" title="Research question">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Research question
</div>
</div>
<div class="callout-body-container callout-body">
<p>What is the average age an MLB pitcher reaches his prime?</p>
</div>
</div>
<div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 10
</div>
</div>
<div class="callout-body-container callout-body">
<p>Copy, paste, tweak appropriate code from previous exercises to determine the prime age of <em>pitchers</em>, using the <code>pitcher_stats</code> data.</p>
</div>
</div>

<div class="no-row-height column-margin column-container"><div class="">
<p><br>
<em>Check</em>: there are 2382 unique pitchers in the <code>pitcher_stats</code> data, so your final dataset for analysis should have that many rows.</p>
</div></div><div class="callout callout-style-default callout-note no-icon callout-titled">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon no-icon"></i>
</div>
<div class="callout-title-container flex-fill">
Exercise 11
</div>
</div>
<div class="callout-body-container callout-body">
<p>Write a paragraph summarizing your findings about the prime age of batters and pitchers from this analysis. Things to consider:</p>
<ul>
<li>Are the prime ages of batters and pitchers similar or different?</li>
<li>Do all players hit their prime at about the same age, or is there a wide range?</li>
<li>Are there limitations to this analysis?</li>
<li>What additional analyses would you want to conduct to investigate prime age more fully?</li>
<li>Is there any additional data you would want to explore further?</li>
</ul>
</div>
</div>
</section>
</section>
<section id="for-fun" class="level1">
<h1>FOR FUN</h1>
<p>You can investigate an individual player’s WAR trajectory over time using the app below. If you’re curious, you can see the R code that built the Shiny app <a href="https://github.com/kgfitzgerald/baylor_apu_score/blob/main/baseball/mlb_prime_age/app.R">here</a> and even try making your own!</p>
<div class="cell">
<iframe src="https://kgfitz.shinyapps.io/Baseball_WAR/?showcase=0" width="672" height="800px" data-external="1">
</iframe>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
<p>Maintained by Katie Fitzgerald <br> We use cookies to track usage statistics to help measure impact of the materials for authors. Please consider allowing tracking cookies.</p>
<div class="cookie-consent-footer"><a href="#" id="open_preferences_center">Manage cookies</a></div></div>
    <div class="nav-footer-right">
      &nbsp;
    </div>
  </div>
</footer>




</body></html>